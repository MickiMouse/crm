(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6544874b"],{"11e9":function(t,a,e){var s=e("52a7"),n=e("4630"),i=e("6821"),c=e("6a99"),r=e("69a8"),o=e("c69a"),l=Object.getOwnPropertyDescriptor;a.f=e("9e1e")?l:function(t,a){if(t=i(t),a=c(a,!0),o)try{return l(t,a)}catch(e){}if(r(t,a))return n(!s.f.call(t,a),t[a])}},"16a5":function(t,a,e){},"2d89":function(t,a,e){},4421:function(t,a,e){"use strict";var s=e("8415"),n=e.n(s);n.a},"5dbc":function(t,a,e){var s=e("d3f4"),n=e("8b97").set;t.exports=function(t,a,e){var i,c=a.constructor;return c!==e&&"function"==typeof c&&(i=c.prototype)!==e.prototype&&s(i)&&n&&n(t,i),t}},"635e":function(t,a,e){"use strict";var s=e("2d89"),n=e.n(s);n.a},"672a":function(t,a,e){"use strict";var s=e("7291"),n=e.n(s);n.a},7277:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-5"},[e("paid-contracts",{staticClass:"h-100",attrs:{data:t.data.pie_chart}})],1),e("div",{staticClass:"col-7"},[e("dynamics-clients",{staticClass:"h-100",attrs:{x:t.data.line_chart.x,y:t.data.line_chart.y}})],1)]),e("div",{staticClass:"row py-4"},[e("div",{staticClass:"col-4"},[e("info-card",{attrs:{icon:["fas","dollar-sign"],value:t.data.total_amount,header:"Общая сумма"}})],1),e("div",{staticClass:"col-4"},[e("info-card",{attrs:{icon:["fas","users"],value:t.data.count_clients,header:"Клиентов"}})],1),e("div",{staticClass:"col-4"},[e("info-card",{attrs:{icon:["fas","users"],value:t.data.agents_count,header:"Агентов"}})],1)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-7"},[e("expand-table",{staticClass:"mb-3",attrs:{items:t.data.rating,fields:t.raiting_fields,header:"Агенты с низкой оценкой",icon:["fas","users"]}}),e("expand-table",{staticClass:"mb-3",attrs:{items:t.data.clients,fields:t.clients_fields,header:"Клиенты с истикающими договорами",icon:["fas","users"]}})],1),t.data.messages?e("div",{staticClass:"col-5"},[e("notifications",{attrs:{items:t.data.messages,header:"Уведомления",icon:["far","bell"]}})],1):t._e()])])},n=[],i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"w-100 card"},[e("div",{staticClass:"row card__header"},[e("div",{staticClass:"col-2"},[e("span",{staticClass:"card__header-icon"},[e("font-awesome-icon",{attrs:{icon:["fas","clipboard-list"]}})],1)]),t._m(0)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 d-flex justify-content-center"},[e("v2-datepicker-range",{attrs:{lang:"en",format:"dd/MM/yyyy"},on:{change:t.getData},model:{value:t.date,callback:function(a){t.date=a},expression:"date"}})],1),e("div",{staticClass:"col-12"},[e("apexchart",{attrs:{type:"donut",height:"300",options:t.chartOptions,series:t.data}})],1)])])},c=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-10"},[e("h4",[t._v("Оплаченных договоров")])])}],r=e("bc3a"),o=e.n(r),l={name:"paidContracts",data:function(){return{date:"",data:this.data,chartOptions:{labels:["Paid","Unpaid"],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]}}},props:{data:Array},methods:{getData:function(){var t=this;o.a.post("".concat(this.$hostname,"/api/dashboard/"),{type:"pie",range:{from:this.dateFormatFrom,to:this.dateFormatTo}}).then((function(a){200===a.status&&(t.data=a.data.pie_chart,console.log(a.data))}))}},computed:{dateFormatFrom:function(){return"".concat(new Date(this.date[0]).getDate(),".").concat(new Date(this.date[0]).getMonth()+1,".").concat(new Date(this.date[0]).getFullYear())},dateFormatTo:function(){return"".concat(new Date(this.date[1]).getDate(),".").concat(new Date(this.date[1]).getMonth()+1,".").concat(new Date(this.date[1]).getFullYear())}}},d=l,u=(e("bdee"),e("2877")),f=Object(u["a"])(d,i,c,!1,null,null,null),p=f.exports,h=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"w-100 card"},[e("div",{staticClass:"row card__header"},[e("div",{staticClass:"col-2"},[e("span",{staticClass:"card__header-icon"},[e("font-awesome-icon",{attrs:{icon:["fas","clipboard-list"]}})],1)]),t._m(0)]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("v2-datepicker-range",{attrs:{lang:"en",format:"dd/MM/yyyy"},on:{change:t.log},model:{value:t.date,callback:function(a){t.date=a},expression:"date"}})],1),e("div",{staticClass:"col-12"},[e("apexchart",{attrs:{type:"line",height:"300",options:t.chartOptions,series:t.y}})],1)])])},m=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-10"},[e("h4",[t._v("Динамика роста клиентов")])])}],_={name:"dynamicsClients",data:function(){return{date:"",series:[{name:"Desktops",data:[10,41,35,51,49,62,69,91,148]}],chartOptions:{chart:{height:350,zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"straight"},grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep"]}}}},computed:{dateFormatFrom:function(){return"".concat(new Date(this.date[0]).getDate(),".").concat(new Date(this.date[0]).getMonth()+1,".").concat(new Date(this.date[0]).getFullYear())},dateFormatTo:function(){return"".concat(new Date(this.date[1]).getDate(),".").concat(new Date(this.date[1]).getMonth()+1,".").concat(new Date(this.date[1]).getFullYear())}},props:{x:Array,y:Array},methods:{log:function(){console.log(this.dateFormatFrom)}},mounted:function(){this.chartOptions.xaxis=x}},v=_,b=Object(u["a"])(v,h,m,!1,null,"66c0d36a",null),g=b.exports,C=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"w-100 card container-fluid h-100"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 pt-1 d-flex align-items-center justify-content-start"},[e("span",{staticClass:"icon"},[e("font-awesome-icon",{attrs:{icon:t.icon}})],1),e("h6",{staticClass:"header ml-1"},[t._v(t._s(t.header))])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 my-5 pt-1"},[e("h3",{staticClass:"value"},[t._v(t._s(t.value))])])])])},y=[],w=(e("c5f6"),{name:"infoCard",props:{value:Number,header:String,icon:Array}}),E=w,k=(e("4421"),Object(u["a"])(E,C,y,!1,null,"bab42190",null)),D=k.exports,F=e("7c0b"),A=e("c149"),I={name:"Dashboard",components:{Notifications:A["a"],ExpandTable:F["a"],InfoCard:D,DynamicsClients:g,PaidContracts:p},data:function(){return{raiting_fields:[{key:"pk",label:"№",class:"table-header"},{key:"username",label:"ФИО агента",class:"table-header table-accent"},{key:"mark",label:"Оценка",class:"table-header"}],client_items:[],clients_fields:[{key:"pk",label:"№",class:"table-header"},{key:"first_name",label:"Компания",class:"table-header table-accent"},{key:"full_name",label:"Агент",class:"table-header table-accent"},{key:"expiration_date",label:"Дата окончания",class:"table-header"}],agent_items:[{age:40,first_name:"Dickerson",last_name:"Macdonald",date:"2019/08/16"},{age:21,first_name:"Larsen",last_name:"Shaw",date:"2019/08/16"},{age:89,first_name:"Geneva",last_name:"Wilson",date:"2019/08/16"},{age:38,first_name:"Jami",last_name:"Carney",date:"2019/08/16"},{age:89,first_name:"Geneva",last_name:"Wilson",date:"2019/08/16"},{age:38,first_name:"Jami",last_name:"Carney",date:"2019/08/16"}],data:{agents_count:2,clients:[],count_clients:3,line_chart:{x:[],y:[]},messages:[],pie_chart:[44,56],rating:[],total_amount:491792}}},methods:{getData:function(){var t=this;o.a.get("".concat(this.$hostname,"/api/dashboard/")).then((function(a){200===a.status&&(t.data=a.data,console.log(a.data))}))}},mounted:function(){this.getData()},beforeCreate:function(){this.$session.exists()||this.$router.push("/")}},N=I,O=(e("b985"),Object(u["a"])(N,s,n,!1,null,null,null));a["default"]=O.exports},7291:function(t,a,e){},"7c0b":function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card"},[e("div",{staticClass:"row header-wrapper pl-3"},[e("div",{staticClass:"col-12 pt-1 d-flex align-items-center justify-content-start"},[e("span",{staticClass:"table__icon"},[e("font-awesome-icon",{attrs:{icon:t.icon}})],1),e("h6",{staticClass:"header ml-1"},[t._v(t._s(t.header))]),e("button",{staticClass:"more-btn ml-auto",on:{click:function(a){t.isTableExpanded=!t.isTableExpanded}}},[t._v("Все")])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("b-table",{staticClass:"mb-0",attrs:{striped:"",hover:"",items:t.items,fields:t.fields,striped:!1,"per-page":t.visibleItems,fixed:!0}})],1)])])},n=[],i={name:"expandTable",data:function(){return{isTableExpanded:!1}},props:{items:Array,fields:Array,header:String,icon:Array},computed:{visibleItems:function(){return!1===this.isTableExpanded?5:this.items.length}}},c=i,r=(e("635e"),e("2877")),o=Object(r["a"])(c,s,n,!1,null,"1df11c86",null);a["a"]=o.exports},8415:function(t,a,e){},"8b97":function(t,a,e){var s=e("d3f4"),n=e("cb7c"),i=function(t,a){if(n(t),!s(a)&&null!==a)throw TypeError(a+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,a,s){try{s=e("9b43")(Function.call,e("11e9").f(Object.prototype,"__proto__").set,2),s(t,[]),a=!(t instanceof Array)}catch(n){a=!0}return function(t,e){return i(t,e),a?t.__proto__=e:s(t,e),t}}({},!1):void 0),check:i}},9093:function(t,a,e){var s=e("ce10"),n=e("e11e").concat("length","prototype");a.f=Object.getOwnPropertyNames||function(t){return s(t,n)}},9760:function(t,a,e){},aa77:function(t,a,e){var s=e("5ca1"),n=e("be13"),i=e("79e5"),c=e("fdef"),r="["+c+"]",o="​",l=RegExp("^"+r+r+"*"),d=RegExp(r+r+"*$"),u=function(t,a,e){var n={},r=i((function(){return!!c[t]()||o[t]()!=o})),l=n[t]=r?a(f):c[t];e&&(n[e]=l),s(s.P+s.F*r,"String",n)},f=u.trim=function(t,a){return t=String(n(t)),1&a&&(t=t.replace(l,"")),2&a&&(t=t.replace(d,"")),t};t.exports=u},b985:function(t,a,e){"use strict";var s=e("16a5"),n=e.n(s);n.a},bdee:function(t,a,e){"use strict";var s=e("9760"),n=e.n(s);n.a},c149:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card container-fluid"},[e("div",{staticClass:"row header-wrapper pl-3"},[e("div",{staticClass:"col-12 pl-0 pt-1 d-flex align-items-center justify-content-start"},[t.icon?e("span",{staticClass:"icon"},[e("font-awesome-icon",{attrs:{icon:t.icon}})],1):t._e(),e("h6",{staticClass:"header",class:{"ml-1":t.icon}},[t._v(t._s(t.header))]),e("button",{staticClass:"more-btn",on:{click:function(a){t.isTableExpanded=!t.isTableExpanded}}},[t._v("Все")])])]),e("div",{staticClass:"row"},t._l(t.items,(function(a){return e("div",{staticClass:"col-12 notification text-left"},[e("h6",{staticClass:"notification__username"},[t._v("\n                "+t._s(a.agent.user.full_name)+"\n            ")]),e("p",{staticClass:"notification__message"},[t._v("\n                "+t._s(a.mess)+"\n            ")]),e("span",{staticClass:"notification__date"},[t._v("\n                 "+t._s(a.created_at)+"\n            ")])])})),0)])},n=[],i={name:"Notifications",data:function(){return{isTableExpanded:!1}},props:{items:Array,header:String,icon:Array},computed:{visibleItems:function(){return!1===this.isTableExpanded?5:11}},mounted:function(){}},c=i,r=(e("672a"),e("2877")),o=Object(r["a"])(c,s,n,!1,null,"c975dd8a",null);a["a"]=o.exports},c5f6:function(t,a,e){"use strict";var s=e("7726"),n=e("69a8"),i=e("2d95"),c=e("5dbc"),r=e("6a99"),o=e("79e5"),l=e("9093").f,d=e("11e9").f,u=e("86cc").f,f=e("aa77").trim,p="Number",h=s[p],m=h,_=h.prototype,v=i(e("2aeb")(_))==p,b="trim"in String.prototype,g=function(t){var a=r(t,!1);if("string"==typeof a&&a.length>2){a=b?a.trim():f(a,3);var e,s,n,i=a.charCodeAt(0);if(43===i||45===i){if(e=a.charCodeAt(2),88===e||120===e)return NaN}else if(48===i){switch(a.charCodeAt(1)){case 66:case 98:s=2,n=49;break;case 79:case 111:s=8,n=55;break;default:return+a}for(var c,o=a.slice(2),l=0,d=o.length;l<d;l++)if(c=o.charCodeAt(l),c<48||c>n)return NaN;return parseInt(o,s)}}return+a};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var a=arguments.length<1?0:t,e=this;return e instanceof h&&(v?o((function(){_.valueOf.call(e)})):i(e)!=p)?c(new m(g(a)),e,h):g(a)};for(var C,y=e("9e1e")?l(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;y.length>w;w++)n(m,C=y[w])&&!n(h,C)&&u(h,C,d(m,C));h.prototype=_,_.constructor=h,e("2aba")(s,p,h)}},fdef:function(t,a){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-6544874b.3731a484.js.map